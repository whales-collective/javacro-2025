---
marp: true
html: true
theme: default
paginate: true
---
<style>
.dodgerblue {
  color: dodgerblue;
}
</style>
## 2. Chat endpoint flow
<div class="mermaid">
graph TD
    %% Style definitions
    classDef inputClass fill:#ffa07a,stroke:#333,stroke-width:2px
    classDef processClass fill:#98fb98,stroke:#333,stroke-width:2px
    classDef storageClass fill:#87ceeb,stroke:#333,stroke-width:2px
    classDef modelClass fill:#e1bee7,stroke:#333,stroke-width:2px
    classDef outputClass fill:#ffeb3b,stroke:#333,stroke-width:2px

    %% Nodes
    Input["User Message"]:::inputClass
    Search["similaritySearch()"]:::processClass
    VStore[(Vector Store)]:::storageClass
    Combine["Message Assembly"]:::processClass
    LLM["Chat Model"]:::modelClass
    Stream["Streaming Response"]:::outputClass

    %% Flow
    Input -->| Query| Search
    VStore -->| Similar Docs| Search
    Search -->| Context| Combine
    Input -->| User Message| Combine
    Combine --> LLM
    LLM --> Stream
</div>