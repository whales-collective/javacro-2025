---
marp: true
html: true
theme: default
paginate: true
style: |
  .columns {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
  }
---
<style>
.dodgerblue {
  color: dodgerblue;
}
</style>
### Embeddings creation flow, Then, Chat flow

<div class="columns">
<div class="mermaid">
graph TD
    %% Style definitions
    classDef fileClass fill:#ffa07a,stroke:#333,stroke-width:2px
    classDef processClass fill:#98fb98,stroke:#333,stroke-width:2px
    classDef storageClass fill:#87ceeb,stroke:#333,stroke-width:2px
    classDef modelClass fill:#e1bee7,stroke:#333,stroke-width:2px

    %% Nodes
    MD[(".md files in /data")]:::fileClass
    Split["TextSplitter<br/>chunkSize: 512 overlap: 128"]:::processClass
    Embed["Embedding Model"]:::modelClass
    Store[(Memory Vector Store)]:::storageClass

    %% Flow
    MD -->| Load Text File| Split
    Split -->| Text Chunks| Embed
    Embed -->| Vectors| Store
</div>
<div class="mermaid">
graph TD
    %% Style definitions
    classDef inputClass fill:#ffa07a,stroke:#333,stroke-width:2px
    classDef processClass fill:#98fb98,stroke:#333,stroke-width:2px
    classDef storageClass fill:#87ceeb,stroke:#333,stroke-width:2px
    classDef modelClass fill:#e1bee7,stroke:#333,stroke-width:2px
    classDef outputClass fill:#ffeb3b,stroke:#333,stroke-width:2px

    %% Nodes
    Input["User Message"]:::inputClass
    Search["similaritySearch()"]:::processClass
    VStore[(Vector Store)]:::storageClass
    Combine["Messages Assembly"]:::processClass
    LLM["Chat Model"]:::modelClass
    Stream["Streaming Response"]:::outputClass

    %% Flow
    Input -->| Query| Search
    VStore -->| Similar Docs| Search
    Search -->| Context| Combine
    Input -->| User Message| Combine
    Combine --> LLM
    LLM --> Stream
</div>
</div>




